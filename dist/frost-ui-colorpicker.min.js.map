{"version":3,"names":["formatPercent","number","Number","toLocaleString","style","parseColor","color","Color","fromString","e","ColorPicker","BaseComponent","constructor","node","options","super","value","$","getValue","this","_node","_options","format","substring","includes","getFormat","defaultColor","_defaultColor","_color","keepInvalid","inline","modal","mobileModal","test","navigator","userAgent","horizontal","inputGroup","closest","shift","_inputGroupColor","findOne","newValue","_getString","setValue","_render","_events","_renderModal","_eventsModal","setData","_menuNode","input","_values","alpha","brightness","hue","saturation","_updateAttributes","_refresh","_refreshDisabled","disable","setAttribute","disabled","dispose","_popper","_modal","Modal","init","removeEvent","remove","_container","_saturation","_saturationGuide","_hue","_hueGuide","_alpha","_alphaColor","_alphaGuide","_preview","_previewColor","_dateOptions","_setBtn","enable","removeAttribute","getColor","hide","isConnected","getDataset","triggerOne","setDataset","uiAnimating","focusableNodes","find","tabindex","fadeOut","duration","then","_","detach","removeDataset","triggerEvent","catch","setColor","setAlpha","_setColor","show","_isEditable","appendTo","append","parentModal","after","_activeTarget","Popper","reference","placement","position","fixed","spacing","minContact","fadeIn","toggle","update","defaults","ignoreReadonly","classes","alphaColor","container","containerHorizontal","guide","menu","menuHorizontal","menuInline","menuModal","menuPadding","modalBody","modalBtnContainer","modalBtnPrimary","modalBtnSecondary","modalContent","modalDialog","preview","spacingHorizontal","spacingModal","spacingVertical","lang","proto","prototype","saturationDragEvent","mouseDragFactory","button","focus","pos","getPosition","_updateSaturation","x","y","addEvent","code","Math","min","max","preventDefault","_updateColor","hueDragEvent","_updateHue","alphaDownEvent","alphaMoveEvent","_updateAlpha","alphaDragEvent","skipUpdate","_keepColor","focusIndex","indexOf","target","shiftKey","length","stopPropagation","stop","isSame","document","activeElement","originalColor","toHexString","toRGBString","toHSLString","is","updateInputGroup","saturationColor","fromHSV","setStyle","backgroundColor","top","left","hueOffset","round","direction","background","alphaOffset","newColor","_native","addClass","removeClass","create","class","attributes","role","btnContainer","cancelBtn","text","type","updateAttributes","updateValue","oldColor","oldValue","data","detail","old","new","percent","percentX","offset","percentY","getAlpha","getBrightness","getSaturation","getHue","setBrightness","setSaturation","setHue","initComponent","nodes","getData","colorpicker","hasDescendent","capture","stopped","i","entries"],"sources":["../src/js/helpers.js","../src/js/color-picker.js","../src/js/index.js","../src/js/prototype/events.js","../src/js/prototype/helpers.js","../src/js/prototype/render.js"],"sourcesContent":["import Color from '@fr0st/color';\n\n/**\n * Format a number as a percent string.\n * @param {number} number The number.\n * @return {string} The percent string.\n */\nexport function formatPercent(number) {\n    return Number(number).toLocaleString('en-US', { style: 'percent' });\n};\n\n/**\n * Get the color format from a value.\n * @param {string} value The color value.\n * @return {string|null} The color format.\n */\nexport function getFormat(value) {\n    if (!value) {\n        return null;\n    }\n\n    if (value.substring(0, 1) === '#') {\n        return 'hex';\n    }\n\n    const format = value.substring(0, 3);\n\n    if (['rgb', 'hsl'].includes(format)) {\n        return format;\n    }\n\n    return null;\n};\n\n/**\n * Parse a Color from any value.\n * @param {string|Color} color The color to parse.\n * @return {Color} The parsed Color.\n */\nexport function parseColor(color) {\n    if (!color) {\n        return null;\n    }\n\n    if (color instanceof Color) {\n        return color;\n    }\n\n    try {\n        return Color.fromString(color);\n    } catch (e) {\n        return null;\n    }\n};\n","import Color from '@fr0st/color';\nimport $ from '@fr0st/query';\nimport { BaseComponent, Modal, Popper } from '@fr0st/ui';\nimport { getFormat, parseColor } from './helpers.js';\n\n/**\n * ColorPicker Class\n * @class\n */\nexport default class ColorPicker extends BaseComponent {\n    /**\n     * New ColorPicker constructor.\n     * @param {HTMLElement} node The input node.\n     * @param {object} [options] The options to create the ColorPicker with.\n     */\n    constructor(node, options) {\n        super(node, options);\n\n        const value = $.getValue(this._node);\n\n        if (this._options.format === 'auto') {\n            this._options.format = getFormat(value);\n        }\n\n        if (this._options.defaultColor) {\n            this._defaultColor = parseColor(this._options.defaultColor);\n        }\n\n        if (!this._defaultColor) {\n            this._defaultColor = new Color();\n        }\n\n        this._color = parseColor(value);\n\n        if (!this._color && value && !this._options.keepInvalid) {\n            this._color = this._defaultColor;\n        }\n\n        if (this._options.inline) {\n            this._options.modal = false;\n        } else if (!this._options.modal && this._options.mobileModal) {\n            this._options.modal = /Android|webOS|iPhone|iPad|iPod/i.test(navigator.userAgent);\n        }\n\n        if (this._options.modal) {\n            this._options.horizontal = true;\n        }\n\n        const inputGroup = $.closest(this._node, '.input-group').shift();\n        if (inputGroup) {\n            this._inputGroupColor = $.findOne('.input-group-color', inputGroup);\n        }\n\n        if (this._color) {\n            const newValue = this._getString(this._color);\n            $.setValue(this._node, newValue);\n        }\n\n        this._render();\n        this._events();\n\n        if (this._options.modal) {\n            this._renderModal();\n            this._eventsModal();\n        }\n\n        $.setData(this._menuNode, { input: this._node });\n\n        this._values = {\n            alpha: 1,\n            brightness: 0,\n            hue: 0,\n            saturation: 0,\n        };\n\n        this._updateAttributes();\n        this._refresh();\n        this._refreshDisabled();\n    }\n\n    /**\n     * Disable the ColorPicker.\n     */\n    disable() {\n        $.setAttribute(this._node, { disabled: true });\n        this._refreshDisabled();\n    }\n\n    /**\n     * Dispose the ColorPicker.\n     */\n    dispose() {\n        if (this._popper) {\n            this._popper.dispose();\n            this._popper = null;\n        }\n\n        if (this._modal) {\n            Modal.init(this._modal).dispose();\n            this._modal = null;\n        }\n\n        $.removeEvent(this._node, 'change.ui.colorpicker');\n        $.removeEvent(this._node, 'input.ui.colorpicker');\n        $.removeEvent(this._node, 'click.ui.colorpicker');\n        $.removeEvent(this._node, 'focus.ui.colorpicker');\n        $.removeEvent(this._node, 'keydown.ui.colorpicker');\n        $.removeEvent(this._node, 'keyup.ui.colorpicker');\n\n        if (this._inputGroupColor) {\n            $.removeEvent(this._inputGroupColor, 'click.ui.colorpicker');\n        }\n\n        $.remove(this._menuNode);\n\n        this._color = null;\n        this._defaultColor = null;\n        this._inputGroupColor = null;\n        this._menuNode = null;\n        this._container = null;\n        this._saturation = null;\n        this._saturationGuide = null;\n        this._hue = null;\n        this._hueGuide = null;\n        this._alpha = null;\n        this._alphaColor = null;\n        this._alphaGuide = null;\n        this._preview = null;\n        this._previewColor = null;\n        this._values = null;\n        this._dateOptions = null;\n        this._modal = null;\n        this._setBtn = null;\n\n        super.dispose();\n    }\n\n    /**\n     * Enable the ColorPicker.\n     */\n    enable() {\n        $.removeAttribute(this._node, 'disabled');\n        this._refreshDisabled();\n    }\n\n    /**\n     * Get the current color.\n     * @return {Color|null} The current color.\n     */\n    getColor() {\n        return this._color;\n    }\n\n    /**\n     * Hide the ColorPicker.\n     */\n    hide() {\n        if (this._options.inline) {\n            return;\n        }\n\n        if (this._options.modal) {\n            Modal.init(this._modal).hide();\n            return;\n        }\n\n        if (\n            !$.isConnected(this._menuNode) ||\n            $.getDataset(this._menuNode, 'uiAnimating') ||\n            !$.triggerOne(this._node, 'hide.ui.colorpicker')\n        ) {\n            return;\n        }\n\n        $.setDataset(this._menuNode, { uiAnimating: 'out' });\n\n        const focusableNodes = $.find('[tabindex=\"0\"]', this._menuNode);\n        $.setAttribute(focusableNodes, { tabindex: -1 });\n\n        $.fadeOut(this._menuNode, {\n            duration: this._options.duration,\n        }).then((_) => {\n            this._popper.dispose();\n            this._popper = null;\n\n            $.detach(this._menuNode);\n            $.removeDataset(this._menuNode, 'uiAnimating');\n            $.triggerEvent(this._node, 'hidden.ui.colorpicker');\n        }).catch((_) => {\n            if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n                $.removeDataset(this._menuNode, 'uiAnimating');\n            }\n        });\n    }\n\n    /**\n     * Set the current color.\n     * @param {string|Color|null} color The new color.\n     */\n    setColor(color) {\n        if (color === null) {\n            this._setColor(color);\n            return;\n        }\n\n        color = parseColor(color);\n\n        if (!color) {\n            return;\n        }\n\n        if (!this._options.alpha) {\n            color = color.setAlpha(1);\n        }\n\n        this._setColor(color);\n    }\n\n    /**\n     * Show the ColorPicker.\n     */\n    show() {\n        if (\n            this._options.inline ||\n            $.isConnected(this._menuNode) ||\n            !this._isEditable()\n        ) {\n            return;\n        }\n\n        if (this._options.modal) {\n            if (this._options.appendTo) {\n                $.append(this._options.appendTo, this._modal);\n            } else {\n                const parentModal = $.closest(this._node, '.modal').shift();\n\n                if (parentModal) {\n                    $.after(parentModal, this._modal);\n                } else {\n                    $.after(this._node, this._modal);\n                }\n            }\n\n            const modal = Modal.init(this._modal);\n\n            if (this._activeTarget) {\n                modal._activeTarget = this._activeTarget;\n            }\n\n            modal.show();\n            return;\n        }\n\n        if (\n            $.getDataset(this._menuNode, 'uiAnimating') ||\n            !$.triggerOne(this._node, 'show.ui.colorpicker')\n        ) {\n            return;\n        }\n\n        $.setDataset(this._menuNode, { uiAnimating: 'in' });\n\n        const focusableNodes = $.find('[tabindex=\"-1\"]', this._menuNode);\n        $.setAttribute(focusableNodes, { tabindex: 0 });\n\n        if (this._options.appendTo) {\n            $.append(this._options.appendTo, this._menuNode);\n        } else {\n            $.after(this._node, this._menuNode);\n        }\n\n        this._popper = new Popper(\n            this._menuNode,\n            {\n                reference: this._node,\n                placement: this._options.placement,\n                position: this._options.position,\n                fixed: this._options.fixed,\n                spacing: this._options.spacing,\n                minContact: this._options.minContact,\n            },\n        );\n\n        $.fadeIn(this._menuNode, {\n            duration: this._options.duration,\n        }).then((_) => {\n            $.removeDataset(this._menuNode, 'uiAnimating');\n            $.triggerEvent(this._node, 'shown.ui.colorpicker');\n        }).catch((_) => {\n            if ($.getDataset(this._menuNode, 'uiAnimating') === 'in') {\n                $.removeDataset(this._menuNode, 'uiAnimating');\n            }\n        });\n    }\n\n    /**\n     * Toggle the ColorPicker.\n     */\n    toggle() {\n        if ($.isConnected(this._menuNode)) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    /**\n     * Update the ColorPicker position.\n     */\n    update() {\n        if (this._popper) {\n            this._popper.update();\n        }\n    }\n}\n","import $ from '@fr0st/query';\nimport { initComponent } from '@fr0st/ui';\nimport ColorPicker from './color-picker.js';\nimport { parseColor } from './helpers.js';\nimport { _events, _eventsModal } from './prototype/events.js';\nimport { _getString, _isEditable, _refresh, _refreshDisabled, _setColor, _updateAlpha, _updateAttributes, _updateColor, _updateHue, _updateSaturation } from './prototype/helpers.js';\nimport { _render, _renderModal } from './prototype/render.js';\n\n// ColorPicker default options\nColorPicker.defaults = {\n    format: 'auto',\n    defaultColor: null,\n    alpha: true,\n    inline: false,\n    horizontal: false,\n    keepInvalid: false,\n    ignoreReadonly: false,\n    modal: false,\n    mobileModal: true,\n    duration: 100,\n    appendTo: null,\n    placement: 'bottom',\n    position: 'start',\n    fixed: false,\n    spacing: 0,\n    minContact: false,\n};\n\n// ColorPicker classes\nColorPicker.classes = {\n    alpha: 'colorpicker-alpha flex-grow-1',\n    alphaColor: 'colorpicker-alpha-color',\n    container: 'd-flex justify-content-between',\n    containerHorizontal: 'flex-column',\n    disabled: 'colorpicker-disabled',\n    guide: 'colorpicker-guide',\n    hue: 'colorpicker-hue flex-grow-1',\n    menu: 'colorpicker',\n    menuHorizontal: 'colorpicker-horizontal',\n    menuInline: 'colorpicker-inline',\n    menuModal: 'colorpicker-modal',\n    menuPadding: 'p-2',\n    modal: 'modal',\n    modalBody: 'modal-body',\n    modalBtnContainer: 'text-end mt-4',\n    modalBtnPrimary: 'btn btn-primary ripple ms-2',\n    modalBtnSecondary: 'btn btn-secondary ripple ms-2',\n    modalContent: 'modal-content',\n    modalDialog: 'modal-dialog modal-sm',\n    preview: 'colorpicker-bar colorpicker-preview',\n    saturation: 'colorpicker-saturation',\n    spacingHorizontal: 'mt-2',\n    spacingModal: 'mt-3',\n    spacingVertical: 'me-2',\n};\n\n// ColorPicker Lang\nColorPicker.lang = {\n    alpha: 'Alpha',\n    brightness: 'Brightness',\n    color: 'Color',\n    hue: 'Hue',\n    saturation: 'Saturation',\n};\n\n// ColorPicker static\nColorPicker.parseColor = parseColor;\n\n// ColorPicker prototype\nconst proto = ColorPicker.prototype;\n\nproto._events = _events;\nproto._eventsModal = _eventsModal;\nproto._getString = _getString;\nproto._isEditable = _isEditable;\nproto._refresh = _refresh;\nproto._refreshDisabled = _refreshDisabled;\nproto._render = _render;\nproto._renderModal = _renderModal;\nproto._setColor = _setColor;\nproto._updateAlpha = _updateAlpha;\nproto._updateAttributes = _updateAttributes;\nproto._updateColor = _updateColor;\nproto._updateHue = _updateHue;\nproto._updateSaturation = _updateSaturation;\n\n// ColorPicker init\ninitComponent('colorpicker', ColorPicker);\n\n// ColorPicker events\n$.addEvent(document, 'mousedown.ui.colorpicker', (e) => {\n    const nodes = $.find('.colorpicker:not(.colorpicker-inline):not(.colorpicker-modal)');\n\n    for (const node of nodes) {\n        const input = $.getData(node, 'input');\n        const colorpicker = ColorPicker.init(input);\n\n        if (\n            $.isSame(colorpicker._node, e.target) ||\n            $.isSame(colorpicker._menuNode, e.target) ||\n            $.hasDescendent(colorpicker._menuNode, e.target)\n        ) {\n            continue;\n        }\n\n        colorpicker.hide();\n    }\n}, { capture: true });\n\n$.addEvent(document, 'keydown.ui.colorpicker', (e) => {\n    if (e.code !== 'Escape') {\n        return;\n    }\n\n    let stopped = false;\n    const nodes = $.find('.colorpicker:not(.colorpicker-inline):not(.colorpicker-modal)');\n\n    for (const [i, node] of nodes.entries()) {\n        const input = $.getData(node, 'input');\n        const colorpicker = ColorPicker.init(input);\n\n        if (!stopped) {\n            stopped = true;\n            e.stopPropagation();\n        }\n\n        colorpicker.hide();\n\n        if (i == 0) {\n            $.focus(input);\n        }\n    }\n}, { capture: true });\n\nexport default ColorPicker;\n","import $ from '@fr0st/query';\nimport { getPosition } from '@fr0st/ui';\nimport { parseColor } from './../helpers.js';\n\n/**\n * Attach events for the ColorPicker.\n */\nexport function _events() {\n    const saturationDownEvent = (e) => {\n        if (e.button) {\n            return false;\n        }\n\n        $.focus(this._saturationGuide);\n    };\n\n    const saturationMoveEvent = (e) => {\n        const pos = getPosition(e);\n        this._updateSaturation(pos.x, pos.y);\n    };\n\n    const saturationDragEvent = $.mouseDragFactory(saturationDownEvent, saturationMoveEvent);\n\n    $.addEvent(this._saturation, 'mousedown.ui.colorpicker touchstart.ui.colorpicker', saturationDragEvent);\n\n    $.addEvent(this._saturation, 'click.ui.colorpicker', (e) => {\n        if (e.button) {\n            return false;\n        }\n\n        const pos = getPosition(e);\n        this._updateSaturation(pos.x, pos.y);\n\n        $.focus(this._saturationGuide);\n    });\n\n    $.addEvent(this._saturationGuide, 'keydown.ui.colorpicker', (e) => {\n        switch (e.code) {\n            case 'ArrowRight':\n                this._values.saturation = Math.min(100, this._values.saturation + 1);\n                break;\n            case 'ArrowDown':\n                this._values.brightness = Math.max(0, this._values.brightness - 1);\n                break;\n            case 'ArrowLeft':\n                this._values.saturation = Math.max(0, this._values.saturation - 1);\n                break;\n            case 'ArrowUp':\n                this._values.brightness = Math.min(100, this._values.brightness + 1);\n                break;\n            default:\n                return;\n        }\n\n        e.preventDefault();\n\n        this._updateColor();\n    });\n\n    const hueDownEvent = (e) => {\n        if (e.button) {\n            return false;\n        }\n\n        $.focus(this._hueGuide);\n    };\n\n    const hueMoveEvent = (e) => {\n        const pos = getPosition(e);\n        this._updateHue(pos.x, pos.y);\n    };\n\n    const hueDragEvent = $.mouseDragFactory(hueDownEvent, hueMoveEvent);\n\n    $.addEvent(this._hue, 'mousedown.ui.colorpicker touchstart.ui.colorpicker', hueDragEvent);\n\n    $.addEvent(this._hue, 'click.ui.colorpicker', (e) => {\n        if (e.button) {\n            return false;\n        }\n\n        const pos = getPosition(e);\n        this._updateHue(pos.x, pos.y);\n\n        $.focus(this._hueGuide);\n    });\n\n    $.addEvent(this._hueGuide, 'keydown.ui.colorpicker', (e) => {\n        switch (e.code) {\n            case 'ArrowRight':\n            case 'ArrowDown':\n                this._values.hue = Math.max(0, this._values.hue - 1);\n                break;\n            case 'ArrowLeft':\n            case 'ArrowUp':\n                this._values.hue = Math.min(360, this._values.hue + 1);\n                break;\n            default:\n                return;\n        }\n\n        e.preventDefault();\n\n        this._updateColor();\n    });\n\n    if (this._options.alpha) {\n        const alphaDownEvent = (e) => {\n            if (e.button) {\n                return false;\n            }\n\n            $.focus(this._alphaGuide);\n        };\n\n        const alphaMoveEvent = (e) => {\n            const pos = getPosition(e);\n            this._updateAlpha(pos.x, pos.y);\n        };\n\n        const alphaDragEvent = $.mouseDragFactory(alphaDownEvent, alphaMoveEvent);\n\n        $.addEvent(this._alpha, 'mousedown.ui.colorpicker touchstart.ui.colorpicker', alphaDragEvent);\n\n        $.addEvent(this._alpha, 'click.ui.colorpicker', (e) => {\n            if (e.button) {\n                return false;\n            }\n\n            const pos = getPosition(e);\n            this._updateAlpha(pos.x, pos.y);\n\n            $.focus(this._alphaGuide);\n        });\n\n        $.addEvent(this._alphaGuide, 'keydown.ui.colorpicker', (e) => {\n            switch (e.code) {\n                case 'ArrowRight':\n                case 'ArrowDown':\n                    this._values.alpha = Math.max(0, this._values.alpha - .01);\n                    break;\n                case 'ArrowLeft':\n                case 'ArrowUp':\n                    this._values.alpha = Math.min(1, this._values.alpha + .01);\n                    break;\n                default:\n                    return;\n            }\n\n            e.preventDefault();\n\n            this._updateColor();\n        });\n    }\n\n    $.addEvent(this._node, 'change.ui.colorpicker', (e) => {\n        if (e.skipUpdate) {\n            return;\n        }\n\n        const value = $.getValue(this._node);\n        const color = parseColor(value);\n\n        if (color) {\n            this._setColor(color);\n        } else if (!this._options.keepInvalid && value) {\n            this._setColor(this._color);\n        } else {\n            this._color = null;\n            this._updateAttributes();\n            this._refresh();\n        }\n    });\n\n    $.addEvent(this._menuNode, 'keydown.ui.colorpicker', (e) => {\n        switch (e.code) {\n            case 'Enter':\n            case 'NumpadEnter':\n                e.preventDefault();\n\n                if (this._options.inline) {\n                    return;\n                }\n\n                if (this._options.modal) {\n                    this._keepColor = true;\n                } else {\n                    $.focus(this._node);\n                }\n\n                this.hide();\n                break;\n            case 'Tab':\n                if (!this._options.modal && !this._options.inline) {\n                    const focusableNodes = $.find('[tabindex=\"0\"]', this._menuNode);\n                    const focusIndex = $.indexOf(focusableNodes, e.target);\n\n                    if (e.shiftKey && focusIndex === 0) {\n                        e.preventDefault();\n\n                        $.focus(this._node);\n                    } else if (!e.shiftKey && focusIndex === focusableNodes.length - 1) {\n                        $.focus(this._node);\n\n                        this.hide();\n                    }\n                }\n                break;\n        }\n    });\n\n    if (this._options.inline) {\n        return;\n    }\n\n    $.addEvent(this._menuNode, 'click.ui.colorpicker', (e) => {\n        // prevent menu node from closing modal\n        e.stopPropagation();\n    });\n\n    $.addEvent(this._node, 'input.ui.colorpicker', (_) => {\n        const value = $.getValue(this._node);\n        const color = parseColor(value);\n\n        if (color) {\n            this._color = color;\n            this._updateAttributes();\n            this._refresh();\n        }\n    });\n\n    $.addEvent(this._node, 'click.ui.colorpicker', (_) => {\n        if ($.getDataset(this._menuNode, 'uiAnimating') === 'in') {\n            return;\n        }\n\n        if (!this._options.modal) {\n            $.stop(this._menuNode);\n            $.removeDataset(this._menuNode, 'uiAnimating');\n        } else {\n            this._activeTarget = this._node;\n        }\n\n        this.show();\n    });\n\n    if (!this._options.modal) {\n        $.addEvent(this._node, 'focus.ui.colorpicker', (_) => {\n            if (!$.isSame(this._node, document.activeElement)) {\n                return;\n            }\n\n            $.stop(this._menuNode);\n            $.removeDataset(this._menuNode, 'uiAnimating');\n\n            this.show();\n        });\n    }\n\n    $.addEvent(this._node, 'keydown.ui.colorpicker', (e) => {\n        switch (e.code) {\n            case 'Enter':\n            case 'NumpadEnter':\n                e.preventDefault();\n\n                this.toggle();\n                break;\n            case 'Escape':\n                if ($.isConnected(this._menuNode)) {\n                    // prevent node from closing modal\n                    e.stopPropagation();\n\n                    this.hide();\n                }\n                break;\n            case 'Tab':\n                if (\n                    e.shiftKey &&\n                    !this._options.modal &&\n                    $.isConnected(this._menuNode)\n                ) {\n                    this.hide();\n                } else if (\n                    !e.shiftKey &&\n                    !this._options.modal &&\n                    $.isConnected(this._menuNode) &&\n                    !$.getDataset(this._menuNode, 'uiAnimating')\n                ) {\n                    e.preventDefault();\n\n                    $.focus(this._saturationGuide);\n                }\n                break;\n        }\n    });\n\n    if (this._inputGroupColor) {\n        $.addEvent(this._inputGroupColor, 'click.ui.colorpicker', (_) => {\n            $.focus(this._node);\n            this.toggle();\n        });\n    }\n};\n\n/**\n * Attach events for the Modal.\n */\nexport function _eventsModal() {\n    let originalColor;\n    this._keepColor = false;\n\n    $.addEvent(this._modal, 'show.ui.modal', (_) => {\n        if (!$.triggerOne(this._node, 'show.ui.colorpicker')) {\n            return false;\n        }\n\n        originalColor = this._color;\n    });\n\n    $.addEvent(this._modal, 'shown.ui.modal', (_) => {\n        $.focus(this._saturationGuide);\n\n        $.triggerEvent(this._node, 'shown.ui.colorpicker');\n    });\n\n    $.addEvent(this._modal, 'hide.ui.modal', (_) => {\n        if (!$.triggerOne(this._node, 'hide.ui.colorpicker')) {\n            this._keepColor = false;\n            return false;\n        }\n\n        this._activeTarget = null;\n\n        this._values.saturation = 0;\n        this._values.hue = 0;\n\n        if (this._keepColor) {\n            this._setColor(this._color);\n        }\n    });\n\n    $.addEvent(this._modal, 'hidden.ui.modal', (_) => {\n        if (!this._keepColor) {\n            this._setColor(originalColor);\n            originalColor = null;\n        }\n\n        this._keepColor = false;\n        $.detach(this._modal);\n        $.triggerEvent(this._node, 'hidden.ui.colorpicker');\n    });\n\n    $.addEvent(this._setBtn, 'click.ui.modal', (_) => {\n        this._keepColor = true;\n    });\n};\n","import Color from '@fr0st/color';\nimport $ from '@fr0st/query';\nimport { formatPercent } from './../helpers.js';\n\n/**\n * Get the color string.\n * @param {Color|null} color The Color.\n * @return {string} The color string.\n */\nexport function _getString(color) {\n    if (!color) {\n        return '';\n    }\n\n    switch (this._options.format) {\n        case 'hex':\n            return color.toHexString();\n        case 'rgb':\n            return color.toRGBString();\n        case 'hsl':\n            return color.toHSLString();\n        default:\n            return `${color}`;\n    }\n};\n\n/**\n * Determine whether the input is editable.\n * @return {Boolean} TRUE if the input is editable, otherwise FALSE.\n */\nexport function _isEditable() {\n    return !$.is(this._node, ':disabled') && (this._options.ignoreReadonly || !$.is(this._node, ':read-only'));\n};\n\n/**\n * Refresh the ColorPicker.\n * @param {object} options The options for setting the color.\n * @param {Boolean} [options.updateAttributes=true] Whether to update the input group.\n */\nexport function _refresh({ updateInputGroup = true } = {}) {\n    const saturationColor = Color.fromHSV(this._values.hue, 100, 100);\n    $.setStyle(this._saturation, {\n        backgroundColor: saturationColor,\n    });\n\n    $.setStyle(this._saturationGuide, {\n        top: `${100 - this._values.brightness}%`,\n        left: `${this._values.saturation}%`,\n    });\n\n    $.setAttribute(this._saturationGuide, {\n        'aria-valuetext': `${this.constructor.lang.saturation} ${formatPercent(this._values.saturation / 100)}, ${this.constructor.lang.brightness} ${formatPercent(this._values.brightness / 100)}`,\n    });\n\n    const hueOffset = `${100 - (this._values.hue / 3.6)}%`;\n    if (this._options.horizontal) {\n        $.setStyle(this._hueGuide, { left: hueOffset });\n    } else {\n        $.setStyle(this._hueGuide, { top: hueOffset });\n    }\n\n    $.setAttribute(this._hueGuide, {\n        'aria-valuetext': Math.round(this._values.hue),\n    });\n\n    if (this._options.alpha) {\n        const alphaColor = Color.fromHSV(this._values.hue, this._values.saturation, this._values.brightness);\n        const direction = this._options.horizontal ?\n            'to right,' :\n            '';\n        $.setStyle(this._alphaColor, {\n            background: `linear-gradient(${direction}${alphaColor} 0%, transparent 100%)`,\n        });\n\n        const alphaOffset = `${100 - (this._values.alpha * 100)}%`;\n        if (this._options.horizontal) {\n            $.setStyle(this._alphaGuide, { left: alphaOffset });\n        } else {\n            $.setStyle(this._alphaGuide, { top: alphaOffset });\n        }\n\n        $.setAttribute(this._alphaGuide, {\n            'aria-valuetext': formatPercent(this._values.alpha),\n        });\n    }\n\n    const newColor = Color.fromHSV(this._values.hue, this._values.saturation, this._values.brightness, this._values.alpha);\n\n    $.setStyle(this._previewColor, {\n        backgroundColor: newColor,\n    });\n\n    if (updateInputGroup && this._inputGroupColor) {\n        $.setStyle(this._inputGroupColor, {\n            backgroundColor: newColor,\n        });\n    }\n};\n\n/**\n * Refresh the toggle disabled.\n */\nexport function _refreshDisabled() {\n    if (this._native) {\n        return;\n    }\n\n    if ($.is(this._node, ':disabled')) {\n        $.addClass(this._menuNode, this.constructor.classes.disabled);\n    } else {\n        $.removeClass(this._menuNode, this.constructor.classes.disabled);\n    }\n};\n\n/**\n * Set the current color.\n * @param {Color} color The new color.\n * @param {object} options The options for setting the color.\n * @param {Boolean} [options.updateAttributes=true] Whether to update the attributes.\n * @param {Boolean} [options.updateInputGroup=true] Whether to update the input group.\n * @param {Boolean} [options.updateValue=true] Whether to update the value.\n */\nexport function _setColor(color, { updateAttributes = true, updateInputGroup = true, updateValue = true } = {}) {\n    if (!this._isEditable()) {\n        return;\n    }\n\n    const oldColor = this._color;\n    this._color = color;\n\n    const oldValue = $.getValue(this._node);\n    const newValue = this._getString(color);\n\n    if (updateAttributes) {\n        this._updateAttributes();\n    }\n\n    this._refresh({ updateInputGroup });\n\n    if (!updateValue || oldValue === newValue) {\n        return;\n    }\n\n    $.setValue(this._node, newValue);\n\n    $.triggerEvent(this._node, 'change.ui.colorpicker', {\n        data: {\n            skipUpdate: true,\n        },\n        detail: {\n            old: oldColor,\n            new: this._color,\n        },\n    });\n};\n\n/**\n * Update the alpha for an X,Y position.\n * @param {number} x The X position.\n * @param {number} y The Y position.\n */\nexport function _updateAlpha(x, y) {\n    const percent = this._options.horizontal ?\n        $.percentX(this._alpha, x, { offset: true }) :\n        $.percentY(this._alpha, y, { offset: true });\n\n    this._values.alpha = 1 - (percent / 100);\n\n    this._updateColor();\n};\n\n/**\n * Update the color attributes.\n */\nexport function _updateAttributes() {\n    const color = this._color || this._defaultColor;\n\n    this._values.alpha = this._options.alpha ?\n        color.getAlpha() :\n        1;\n\n    this._values.brightness = color.getBrightness();\n\n    if (this._values.brightness > 0) {\n        this._values.saturation = color.getSaturation();\n    }\n\n    if (this._values.brightness > 0 && this._values.saturation > 0) {\n        this._values.hue = color.getHue();\n    }\n};\n\n/**\n/**\n * Update the color from attributes.\n */\nexport function _updateColor() {\n    const color = (this._color || this._defaultColor)\n        .setAlpha(this._values.alpha)\n        .setBrightness(this._values.brightness)\n        .setSaturation(this._values.saturation)\n        .setHue(this._values.hue);\n\n    this._setColor(color, {\n        updateAttributes: false,\n        updateInputGroup: !this._options.modal,\n        updateValue: !this._options.modal,\n    });\n};\n\n/**\n * Update the hue for an X,Y position.\n * @param {number} x The X position.\n * @param {number} y The Y position.\n */\nexport function _updateHue(x, y) {\n    const percent = this._options.horizontal ?\n        $.percentX(this._hue, x, { offset: true }) :\n        $.percentY(this._hue, y, { offset: true });\n\n    this._values.hue = (100 - percent) * 3.6;\n\n    this._updateColor();\n};\n\n/**\n * Update the saturation for an X,Y position.\n * @param {number} x The X position.\n * @param {number} y The Y position.\n */\nexport function _updateSaturation(x, y) {\n    this._values.brightness = 100 - $.percentY(this._saturation, y, { offset: true });\n    this._values.saturation = $.percentX(this._saturation, x, { offset: true });\n\n    this._updateColor();\n};\n","import $ from '@fr0st/query';\n\n/**\n * Render the ColorPicker.\n */\nexport function _render() {\n    this._menuNode = $.create('div', {\n        class: this.constructor.classes.menu,\n    });\n\n    this._container = $.create('div', {\n        class: this.constructor.classes.container,\n    });\n    $.append(this._menuNode, this._container);\n\n    this._saturation = $.create('div', {\n        class: this.constructor.classes.saturation,\n    });\n    $.append(this._container, this._saturation);\n\n    this._saturationGuide = $.create('span', {\n        class: this.constructor.classes.guide,\n        attributes: {\n            'role': 'slider',\n            'tabindex': 0,\n            'aria-label': this.constructor.lang.color,\n        },\n    });\n    $.append(this._saturation, this._saturationGuide);\n\n    this._hue = $.create('div', {\n        class: this.constructor.classes.hue,\n    });\n    $.append(this._container, this._hue);\n\n    this._hueGuide = $.create('span', {\n        class: this.constructor.classes.guide,\n        attributes: {\n            'role': 'slider',\n            'tabindex': 0,\n            'aria-label': this.constructor.lang.hue,\n        },\n    });\n    $.append(this._hue, this._hueGuide);\n\n    if (this._options.alpha) {\n        this._alpha = $.create('div', {\n            class: this.constructor.classes.alpha,\n        });\n        $.append(this._container, this._alpha);\n\n        this._alphaColor = $.create('div', {\n            class: this.constructor.classes.alphaColor,\n        });\n        $.append(this._alpha, this._alphaColor);\n\n        this._alphaGuide = $.create('span', {\n            class: this.constructor.classes.guide,\n            attributes: {\n                'role': 'slider',\n                'tabindex': 0,\n                'aria-label': this.constructor.lang.alpha,\n            },\n        });\n        $.append(this._alpha, this._alphaGuide);\n    }\n\n    this._preview = $.create('div', {\n        class: this.constructor.classes.preview,\n    });\n    $.append(this._menuNode, this._preview);\n\n    this._previewColor = $.create('div');\n    $.append(this._preview, this._previewColor);\n\n    if (this._options.horizontal) {\n        const spacing = this._options.modal ?\n            this.constructor.classes.spacingModal :\n            this.constructor.classes.spacingHorizontal;\n\n        $.addClass(this._menuNode, this.constructor.classes.menuHorizontal);\n        $.addClass(this._container, this.constructor.classes.containerHorizontal);\n        $.addClass(this._hue, spacing);\n\n        if (this._options.alpha) {\n            $.addClass(this._alpha, spacing);\n        }\n\n        $.addClass(this._preview, spacing);\n    } else {\n        $.addClass(this._saturation, this.constructor.classes.spacingVertical);\n\n        if (this._options.alpha) {\n            $.addClass(this._hue, this.constructor.classes.spacingVertical);\n        }\n\n        $.addClass(this._preview, this.constructor.classes.spacingHorizontal);\n    }\n\n    if (this._options.modal) {\n        $.addClass(this._menuNode, this.constructor.classes.menuModal);\n    } else if (this._options.inline) {\n        $.addClass(this._menuNode, this.constructor.classes.menuInline);\n\n        $.after(this._node, this._menuNode);\n        $.hide(this._node);\n    } else {\n        $.addClass(this._menuNode, this.constructor.classes.menuPadding);\n        $.setAttribute(this._menuNode, {\n            'role': 'dialog',\n            'aria-modal': true,\n        });\n    }\n};\n\n/**\n * Render the Modal.\n */\nexport function _renderModal() {\n    this._modal = $.create('div', {\n        class: this.constructor.classes.modal,\n        attributes: {\n            'tabindex': -1,\n            'role': 'dialog',\n            'aria-modal': true,\n        },\n    });\n\n    const modalDialog = $.create('div', {\n        class: this.constructor.classes.modalDialog,\n    });\n\n    $.append(this._modal, modalDialog);\n\n    const modalContent = $.create('div', {\n        class: this.constructor.classes.modalContent,\n    });\n\n    $.append(modalDialog, modalContent);\n\n    const modalBody = $.create('div', {\n        class: this.constructor.classes.modalBody,\n    });\n\n    $.append(modalBody, this._menuNode);\n\n    const btnContainer = $.create('div', {\n        class: this.constructor.classes.modalBtnContainer,\n    });\n\n    $.append(modalBody, btnContainer);\n\n    const cancelBtn = $.create('button', {\n        class: this.constructor.classes.modalBtnSecondary,\n        text: 'Cancel',\n        attributes: {\n            'type': 'button',\n            'data-ui-dismiss': 'modal',\n        },\n    });\n\n    $.append(btnContainer, cancelBtn);\n\n    this._setBtn = $.create('button', {\n        class: this.constructor.classes.modalBtnPrimary,\n        text: 'Set',\n        attributes: {\n            'type': 'button',\n            'data-ui-dismiss': 'modal',\n            'data-ui-set-color': 'true',\n        },\n    });\n\n    $.append(btnContainer, this._setBtn);\n\n    $.append(modalContent, modalBody);\n};\n"],"mappings":"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"}